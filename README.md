<h2 align="center">TCDE-VIS</h2>

### 项目成果
***
- CCF C论文一篇《Visual analytics of CO2 emissions from individuals’ daily travel based on large-scale taxi trajectories》
- 中国高校计算机大赛网络技术挑战赛二等奖

### 技术栈
***
- 前端相关：Vue2、Vuex、ES6、Element-Ui、D3.js、Echarts、Leaflet(地图JS库)
- 算法相关：pandas、flask、PostgreSQL、核密度估计、朴素贝叶斯

### 系统展示
***

<img src="https://raw.githubusercontent.com/xianghui-ma/staticImage/master/interface.png"/>

**(A) 控制面板视图提供参数配置**、**(B) 地图视图提供碳排放轨迹的空间分布总览和OD热力图分布**、**(C) OD轨迹视图展现了OD轨迹的特征、时间和类型分布**、**(D) 表格视图展现了OD轨迹的详细信息**、**(E) 时间特征视图展现了碳排放和出行频率的时间分布状况**、**(F) 统计视图描述了行车状况和碳排放间的关系。**

### 项目概述
***

#### 背景
- 随着滴滴等叫车服务的发展，与居民出行相关的交通碳排放已成为城市低碳和可持续发展的关键问题。理解居民出行对碳排放的影响对低碳交通建设具有重要意义。
- **准确推断出行目**的是分析不同出行目的交通碳排放模式的前提。已有的基于机器学习、概率和规则的出行目的推断方法虽被证明是有效的，但**忽略了门对门服务和POI吸引力的时变特性**。

#### 数据概述
我们主要使用了南昌市的三类数据：
**(1)路网数据**包含59306条路段和41398个顶点(即路段交点)。
**(2)出租车轨迹数据**由GPS坐标、时间、速度、载客状态和行驶状态等属性组成。其包含一周内共约4530辆出租车的轨迹。每天的GPS点数量约为17093846。
**(3)POI签到数据**包含22408个点，每一个POI由坐标、POI类型、签到数量和签到时间等信息描述。

#### 本文方法

**为准确推断居民出行目的，并据此分析居民出行对交通碳排放的影响。** 本文构建了如下分析框架：

<img src="https://raw.githubusercontent.com/xianghui-ma/staticImage/master/pipeline.png"/>

**(1) Data Processing**模块旨在完成源数据的预处理操作。我们匹配POI到对应的出行目的，同时从网络数字地图中提取不同类型POI在工作日和周末的营业时间。地图匹配是为了将发生漂移的出租车GPS坐标点纠正至路网上，然后再进行轨迹提取。本文仅对南昌市内的主干道路进行研究，因此需要通过路网过滤操作裁除南昌市之外的路网并过滤掉次要路段。之后路网拓扑被建立。预处理后的所有数据均被存储至PostgreSQL。

**(2) Inferring Trip Purpose**模块由三个主要步骤构成：1)我们首先通过下车点距POI的距离和POI营业时间筛选出目标POI集合，再通过门对门服务判断得到候选POI集合；2)根据POI签到数据，使用核密度估计构建POI吸引力动态函数，再通过Huff模型计算候选POI的综合吸引力；3)最后根据贝叶斯模型计算乘客到各候选POI的访问概率，访问概率最大的POI即为出行目的。轨迹碳排放也被在此计算。

**(3) Visualization**模块给专家提供了一个交互式探索和动态数据更新的可视分析工具。我们设计了新颖的可视化图标以方便用户直观地理解不同出行交通碳排放模式。多视图协同交互为用户提供了多维(即时间和空间)分析视角。过滤等交互方式使用户能够聚焦于对某一区域或某一时段的碳排放模式进行分析。

### 案例分析
***

#### Case01：揭露交通碳排放时空模式

<img src="https://raw.githubusercontent.com/xianghui-ma/staticImage/master/case01.png"/>

Home、School和Work三个最常见的出行目的被选择来探索不同出行碳排放的时空模式。在Home、School和Work中，八一大桥、南昌大桥、阳明大道、洪都北大道和八一大道的碳排放量都很高(在图(3)中，上述道路用红色文本标记)。特别地，图(1)表明，红谷中大道与Home相关的碳排放量很高，主要原因在于周围有许多居民区。图(2)表明，靠近南昌大学和南昌工程学院的上海北大道和北京东大道与School相关的碳排放量很高。图(3)表明，沿江中大道与Work相关的碳排放量很高，分析发现，该大道周围为居民区且连接着红谷隧道、南昌大桥和朝阳大桥，因此其为周围和对岸居民通勤的必经之路。

图中的时间特征视图描述了Home、School和Work的出行频率及碳排放量的时间分布特征。碳排放量同出行频率呈正相关容易被发现(在The Temporal Feature View中的红色虚线框)。Home的高峰时段为7:00AM-11:00AM和20:00PM-23:00PM。School的高峰时段为7:00AM-11:00AM。Work的高峰时段持续较长，为8:00AM-20:00PM。


#### Case02：探究驾车行为与碳排放的关系

<img src="https://raw.githubusercontent.com/xianghui-ma/staticImage/master/case02.png"/>

以6日的所有出行轨迹数据为研究对象，图(1)展现了不同出行目的轨迹的平均行驶速度、平均行驶距离、平均行驶时长和平均碳排放。整体而言，不同出行的四个指标的差距较小。平均速度在15-18m/s，为中高速行驶；平均行驶距离和平均行驶时长分别为5-7km和0.3-0.5h，属于短途出行；平均碳排放多位于2-3kg，且整体而言行驶速度、行驶距离和行驶时长越大，碳排放量越大。图(2)的箱型图描述了数据的详细分布特征。速度、距离、时长和碳排放的最大值集中在Shop、School和Work中。最小值集中在Dining和Medical中。导致这一现象的原因可能是学校和工作地点距离住宅区较远，而餐厅和医疗设施等一般被设置在距商业区或住宅区较近的地方。因此，合理规划住宅区、学校和商业区的位置，以及为通勤和上学提供更为便利的公共交通设施有助于减少来自School和Work的碳排放。

#### Case03：分析OD碳排放

<img src="https://raw.githubusercontent.com/xianghui-ma/staticImage/master/case03.png"/>

首先用户根据OD热力图在the Map View中选择O/D两个区域(图(1))。The Time Heatmap view(图(3))和the Number of Travel view(图(3))表明从O到D的轨迹起始时间集中在10:00AM-13:00PM、15:00PM-16:00PM和19:00PM-20:00PM，轨迹出行目的主要为Dining、Medical和Traffic。为了分析高碳排放轨迹的分布路段，我们对每条轨迹按照碳排放量进行降序排序，并选择碳排放量排名前10的轨迹(图(2)左侧表格)，the Map View中的红色虚线框(图(2)右侧)标注了被选择的轨迹。

图(4)中的散点图呈现了由O到D所有轨迹的特征分布状况。出行目的为Dining和Medical的轨迹形成了一个聚簇，这说明他们具有相近的轨迹碳排放、轨迹长度、行驶速度和行驶时长。我们分别刷选出Dining和Medical两个轨迹聚簇(图(4)中的C1和C2)，图(5)表明Dining的高碳排放路段主要分布在Bayi Road、Ruzi Road、Fuhe Road和Jiefang Road。Medical的高碳排放路段不仅包括所有Dining高碳排放路段，还包括Dieshan Road、Zhongshan Road和Xiangshan Road。

### 总结
***
在本文，我们提出了一个新颖的出行目的推断方法以支持居民日常出行碳排放分析。通过和专家的深入讨论，我们提炼了关于居民日常出行碳排放分析的用户需求。基于需求，我们开发了一个交互式可视分析系统(TCDEVis)。在该系统中，基于出行目的推断方法提取而得的居民日常出行交通碳排放的时空模式可以被探索。基于真实数据的案例研究和来自专家的积极反馈验证了系统的有效性。未来，我们将利用更加广泛的数据（如公交车和私家车等数据）分析城市交通碳排放，同时提供更为具体的低碳路径调度建议。